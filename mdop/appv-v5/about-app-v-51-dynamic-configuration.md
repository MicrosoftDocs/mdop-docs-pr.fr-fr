---
title: À propos de la configuration dynamique App-V 5,1
description: Vous pouvez utiliser la configuration dynamique pour personnaliser un package App-V 5,1 pour un utilisateur. Utilisez les informations suivantes pour créer ou modifier un fichier de configuration dynamique existant.
author: dansimp
ms.assetid: 35bc9908-d502-4a9c-873f-8ee17b6d9d74
ms.reviewer: ''
manager: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/28/2018
ms.author: dansimp
ms.openlocfilehash: ec8a25da6e139ac329810b1e04f7097cadaa6ab4
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/26/2020
ms.locfileid: "10806117"
---
# <span data-ttu-id="72695-104">À propos de la configuration dynamique App-V 5,1</span><span class="sxs-lookup"><span data-stu-id="72695-104">About App-V 5.1 dynamic configuration</span></span> 
<span data-ttu-id="72695-105">Avec la configuration dynamique, vous pouvez modifier le fichier de configuration dynamique pour personnaliser l’exécution d’un package App-V 5,1 pour un utilisateur ou un groupe.</span><span class="sxs-lookup"><span data-stu-id="72695-105">With dynamic configuration, you can edit the dynamic configuration file to customize how an App-V 5.1 package runs for a user or group.</span></span> <span data-ttu-id="72695-106">La personnalisation de package supprime le besoin de reséquencer les packages à l’aide des paramètres souhaités.</span><span class="sxs-lookup"><span data-stu-id="72695-106">Package customization removes the need to resequence packages using the desired settings.</span></span>  <span data-ttu-id="72695-107">Il permet également de rester indépendant du contenu du package et des paramètres personnalisés.</span><span class="sxs-lookup"><span data-stu-id="72695-107">It also provides a way to keep package content and custom settings independent.</span></span>

<span data-ttu-id="72695-108">Les packages d’application virtuels contiennent un manifeste qui fournit toutes les informations fondamentales pour le package.</span><span class="sxs-lookup"><span data-stu-id="72695-108">Virtual application packages contain a manifest that provides all the core information for the package.</span></span> <span data-ttu-id="72695-109">Ces informations incluent les valeurs par défaut des paramètres du package et déterminent les paramètres du formulaire le plus basique (sans personnalisation supplémentaire).</span><span class="sxs-lookup"><span data-stu-id="72695-109">This information includes the defaults for the package settings and determines settings in the most basic form (with no additional customization).</span></span> 

<span data-ttu-id="72695-110">Lors de la création d’un package, le Sequencer génère automatiquement des fichiers de déploiement et de configuration de l’utilisateur à l’aide des données de manifeste du package.</span><span class="sxs-lookup"><span data-stu-id="72695-110">When a package gets created, the sequencer generates default deployment and user configuration .xml files automatically using the package manifest data.</span></span> <span data-ttu-id="72695-111">Par conséquent, ces fichiers générés reflètent les paramètres par défaut configurés lors du séquençage.</span><span class="sxs-lookup"><span data-stu-id="72695-111">Therefore, these generated files reflect the default settings configured during sequencing.</span></span> <span data-ttu-id="72695-112">Si vous appliquez ces fichiers à un package dans le formulaire généré par le Sequencer, les packages présentent les mêmes paramètres par défaut que le manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-112">If you apply these files to a package in the form generated by the sequencer, the packages have the same default settings that came from their manifest.</span></span> 

<span data-ttu-id="72695-113">Utilisez ces fichiers générés pour apporter des modifications, le cas échéant, qui ne modifie pas directement le package.</span><span class="sxs-lookup"><span data-stu-id="72695-113">Use these generated files to make changes, if necessary, which doesn’t directly affect the package.</span></span> <span data-ttu-id="72695-114">Si vous souhaitez ajouter, supprimer ou mettre à jour les fichiers de configuration, apportez les modifications souhaitées sur les valeurs par défaut dans les informations du manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-114">If you want to add, delete or update the configuration files, make your changes about the default values in the manifest information.</span></span>

>[!TIP]
><span data-ttu-id="72695-115">L’ordre dans lequel les fichiers sont lus est le suivant:</span><span class="sxs-lookup"><span data-stu-id="72695-115">The order in which the files read are:</span></span><ul><li><span data-ttu-id="72695-116">UserConfig.xml</span><span class="sxs-lookup"><span data-stu-id="72695-116">UserConfig.xml</span></span></li><li><span data-ttu-id="72695-117">DeploymentConfig.xml</span><span class="sxs-lookup"><span data-stu-id="72695-117">DeploymentConfig.xml</span></span></li><li><span data-ttu-id="72695-118">Manifeste</span><span class="sxs-lookup"><span data-stu-id="72695-118">Manifest</span></span></li></ul><p><span data-ttu-id="72695-119">La première entrée représente ce qui lit en dernier.</span><span class="sxs-lookup"><span data-stu-id="72695-119">The first entry represents what gets read last.</span></span> <span data-ttu-id="72695-120">Par conséquent, son contenu est prioritaire, et tous les packages contiennent fondamentalement et fournissent des paramètres par défaut à partir du manifeste du package.</span><span class="sxs-lookup"><span data-stu-id="72695-120">Therefore, its content takes precedence, and all packages inherently contain and provide default settings from the package manifest.</span></span><ol><li> <span data-ttu-id="72695-121">Si vous personnalisez le fichier DeploymentConfig.xml et appliquez les paramètres personnalisés, les paramètres par défaut dans le manifeste du package sont remplacés.</span><span class="sxs-lookup"><span data-stu-id="72695-121">If customizing the DeploymentConfig.xml file and apply the customized settings, the default settings in the package manifest get overridden.</span></span> </li><li> <span data-ttu-id="72695-122">S’il s’agit de la personnalisation de l' UserConfig.xml et de l’application des paramètres personnalisés, les paramètres par défaut pour la configuration de déploiement et le manifeste du package sont remplacés.</span><span class="sxs-lookup"><span data-stu-id="72695-122">If customizing the UserConfig.xml and apply the customized settings, the default settings for both the deployment configuration and the package manifest get overridden.</span></span> </li></ol>

## <span data-ttu-id="72695-123">Contenu du fichier de configuration utilisateur (UserConfig.xml)</span><span class="sxs-lookup"><span data-stu-id="72695-123">User configuration file contents (UserConfig.xml)</span></span>
<span data-ttu-id="72695-124">Le fichier UserConfig fournit des paramètres de configuration qui s’appliquent à un utilisateur spécifique lors du déploiement du package sur un ordinateur exécutant le client App-V 5,1.</span><span class="sxs-lookup"><span data-stu-id="72695-124">The UserConfig file provides configuration settings that get applied for a specific user when deploying the package to a computer running the App-V 5.1 client.</span></span>  <span data-ttu-id="72695-125">Ces paramètres n’affectent aucun autre utilisateur sur le client.</span><span class="sxs-lookup"><span data-stu-id="72695-125">These settings don’t affect any other users on the client.</span></span>

<span data-ttu-id="72695-126">Utilisez le fichier UserConfig pour spécifier ou modifier des paramètres personnalisés pour un package:</span><span class="sxs-lookup"><span data-stu-id="72695-126">Use the UserConfig file to specify or modify custom settings for a package:</span></span>

-   <span data-ttu-id="72695-127">Extensions intégrées au système natif par utilisateur: raccourcis, associations de types de fichiers, protocoles d’URL, AppPaths, clients logiciels et COM</span><span class="sxs-lookup"><span data-stu-id="72695-127">Extensions integrated into the native system per user: shortcuts, file-type associations, URL protocols, AppPaths, software clients and COM</span></span>
-   <span data-ttu-id="72695-128">Sous-systèmes virtuels: objets d’application, variables d’environnement, modifications du Registre, services et polices</span><span class="sxs-lookup"><span data-stu-id="72695-128">Virtual subsystems: application objects, environment variables, registry modifications, services and fonts</span></span>
-   <span data-ttu-id="72695-129">Scripts (contexte utilisateur uniquement)</span><span class="sxs-lookup"><span data-stu-id="72695-129">Scripts (user context only)</span></span>
-   <span data-ttu-id="72695-130">Autorité de gestion (pour contrôler la co-existence d’un package avec App-V 4,6)</span><span class="sxs-lookup"><span data-stu-id="72695-130">Managing authority (for controlling co-existence of package with App-V 4.6)</span></span>

### <span data-ttu-id="72695-131">En-tête</span><span class="sxs-lookup"><span data-stu-id="72695-131">Header</span></span>

<span data-ttu-id="72695-132">L’en-tête d’un fichier de configuration utilisateur dynamique se présente comme suit:</span><span class="sxs-lookup"><span data-stu-id="72695-132">The header of a dynamic user configuration file looks like:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?><UserConfiguration PackageId="1f8488bf-2257-46b4-b27f-09c9dbaae707" DisplayName="Reserved" xmlns="http://schemas.microsoft.com/appv/2010/userconfiguration">
```

<span data-ttu-id="72695-133">**PackageId** est de la même valeur qu’existe dans le fichier manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-133">The **PackageId** is the same value as exists in the manifest file.</span></span>


### <span data-ttu-id="72695-134">Body</span><span class="sxs-lookup"><span data-stu-id="72695-134">Body</span></span>

<span data-ttu-id="72695-135">Le corps du fichier de configuration utilisateur dynamique peut inclure tous les points d’extension d’application définis dans le fichier manifeste, ainsi que les informations de configuration des applications virtuelles.</span><span class="sxs-lookup"><span data-stu-id="72695-135">The body of the dynamic user configuration file can include all the app extension points defined in the manifest file, as well as information to configure virtual applications.</span></span> <span data-ttu-id="72695-136">Quatre sous-sections sont autorisées dans le corps de texte:</span><span class="sxs-lookup"><span data-stu-id="72695-136">There are four subsections allowed in the body:</span></span>

1.  **[<span data-ttu-id="72695-137">Applications</span><span class="sxs-lookup"><span data-stu-id="72695-137">Applications</span></span>](#applications)** 
2.  **[<span data-ttu-id="72695-138">Sous-systèmes</span><span class="sxs-lookup"><span data-stu-id="72695-138">Subsystems</span></span>](#subsystems)**
3.  **[<span data-ttu-id="72695-139">UserScripts</span><span class="sxs-lookup"><span data-stu-id="72695-139">UserScripts</span></span>](#userscripts)**
4.  **[<span data-ttu-id="72695-140">ManagingAuthority</span><span class="sxs-lookup"><span data-stu-id="72695-140">ManagingAuthority</span></span>](#managingauthority)**

#### <span data-ttu-id="72695-141">Applications</span><span class="sxs-lookup"><span data-stu-id="72695-141">Applications</span></span>

<span data-ttu-id="72695-142">Toutes les extensions d’application contenues dans le fichier manifeste au sein d’un package ont un ID d’application attribué, que vous trouverez dans le fichier manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-142">All app-extensions contained in the manifest file within a package have an Application ID assigned, which you find in the manifest file.</span></span> <span data-ttu-id="72695-143">L’ID d’application vous permet d’activer ou de désactiver toutes les extensions pour une application donnée au sein d’un package.</span><span class="sxs-lookup"><span data-stu-id="72695-143">The Application ID lets you enable or disable all extensions for a given application within a package.</span></span> <span data-ttu-id="72695-144">L’ID de l’application doit exister dans le fichier manifeste ou n’est pas pris en compte.</span><span class="sxs-lookup"><span data-stu-id="72695-144">The Application ID must exist in the manifest file, or it gets ignored.</span></span>

```XML
<UserConfiguration PackageId="1f8488bf-2257-46b4-b27f-09c9dbaae707" DisplayName="Reserved"  xmlns="http://schemas.microsoft.com/appv/2010/userconfiguration">

<Applications>

<!--No new application can be defined in policy. AppV Client will ignore any application ID that is not also in the Manifest file-->

<Application Id="{a56fa627-c35f-4a01-9e79-7d36aed8225a}" Enabled="false">

</Application>

</Applications>

..

</UserConfiguration>
```

#### <span data-ttu-id="72695-145">Sous-systèmes</span><span class="sxs-lookup"><span data-stu-id="72695-145">Subsystems</span></span>

<span data-ttu-id="72695-146">Nouvel appextensions et autres sous-systèmes organisés en tant que sous-nœuds.</span><span class="sxs-lookup"><span data-stu-id="72695-146">AppExtensions and other subsystems arranged as subnodes.</span></span>

```XML
<UserConfiguration PackageId="1f8488bf-2257-46b4-b27f-09c9dbaae707" DisplayName="Reserved" xmlns="http://schemas.microsoft.com/appv/2010/userconfiguration">

<Subsystems>

..

</Subsystems>

..

</UserConfiguration>
```

<span data-ttu-id="72695-147">Vous pouvez activer ou désactiver chaque sous-système à l’aide de l’attribut **Enabled** .</span><span class="sxs-lookup"><span data-stu-id="72695-147">You can enable or disable each subsystem using the **Enabled** attribute.</span></span>

**<span data-ttu-id="72695-148">Extensions</span><span class="sxs-lookup"><span data-stu-id="72695-148">Extensions</span></span>** 

<span data-ttu-id="72695-149">Quelques extensions de contrôle de sous-systèmes (sous-systèmes d’extension).</span><span class="sxs-lookup"><span data-stu-id="72695-149">Some subsystems (extension subsystems) control extensions.</span></span> <span data-ttu-id="72695-150">Ces sous-systèmes sont des raccourcis, des associations de types de fichiers, des protocoles d’URL, des AppPaths, des clients logiciels et des COM.</span><span class="sxs-lookup"><span data-stu-id="72695-150">Those subsystems are Shortcuts, File-Type associations, URL Protocols, AppPaths, Software Clients, and COM.</span></span>

<span data-ttu-id="72695-151">Les sous-systèmes d’extension peuvent être activés ou désactivés indépendamment du contenu.</span><span class="sxs-lookup"><span data-stu-id="72695-151">Extension subsystems can be enabled and disabled independently of the content.</span></span> <span data-ttu-id="72695-152">Par exemple, si vous activez l’option raccourcis, le client utilise par défaut les raccourcis contenus dans le manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-152">For example, if you enable Shortcuts, the client uses the Shortcuts contained within the manifest by default.</span></span> <span data-ttu-id="72695-153">Chaque sous-système d’extension peut contenir un \<Extensions\> nœud.</span><span class="sxs-lookup"><span data-stu-id="72695-153">Each extension subsystem can contain an \<Extensions\> node.</span></span> <span data-ttu-id="72695-154">Si cet élément enfant est présent, le client ignore le contenu du fichier manifeste du sous-système et n’utilise que le contenu du fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="72695-154">If this child element is present, the client ignores the content in the manifest file for that subsystem and only use the content in the configuration file.</span></span> 

_**<span data-ttu-id="72695-155">Exemples:</span><span class="sxs-lookup"><span data-stu-id="72695-155">Examples:</span></span>**_ 

- <span data-ttu-id="72695-156">Si vous définissez cette valeur dans le fichier de configuration de l’utilisateur ou du déploiement, le contenu du manifeste est ignoré.</span><span class="sxs-lookup"><span data-stu-id="72695-156">If you define this in either the user or deployment config file, the content in the manifest gets ignored.</span></span>

  ```XML

  <Shortcuts  Enabled="true"\>

  <Extensions>

  ...

  </Extensions>

  </Shortcuts>
  ```
- <span data-ttu-id="72695-157">Si vous définissez uniquement ce qui suit, le contenu du manifeste est intégré lors de la publication.</span><span class="sxs-lookup"><span data-stu-id="72695-157">If you define only the following, the content in the manifest gets integrated during publishing.</span></span>

  ```XML

  <Shortcuts  Enabled="true"/>
  ```

- <span data-ttu-id="72695-158">Si vous définissez ce qui suit, tous les raccourcis du manifeste sont toujours ignorés.</span><span class="sxs-lookup"><span data-stu-id="72695-158">If you define the following, all Shortcuts within the manifest still get ignored.</span></span> <span data-ttu-id="72695-159">En d’autres termes, aucun raccourci n’est intégré.</span><span class="sxs-lookup"><span data-stu-id="72695-159">In other words, no Shortcuts get integrated.</span></span>

  ```XML

  <Shortcuts  Enabled="true">

     <Extensions/>

  </Shortcuts>
  ```

_**<span data-ttu-id="72695-160">Sous-systèmes d’extension pris en charge:</span><span class="sxs-lookup"><span data-stu-id="72695-160">Supported extension subsystems:</span></span>**_ 

<span data-ttu-id="72695-161">Le sous-système d’extension **raccourcis** détermine quels raccourcis sont intégrés dans le système local.</span><span class="sxs-lookup"><span data-stu-id="72695-161">**Shortcuts** extension subsystem controls what shortcuts get integrated into the local system.</span></span>  

```XML

<Subsystems>

<Shortcuts Enabled="true">

  <Extensions>

    <Extension Category="AppV.Shortcut">

      <Shortcut>

        <File>[{Common Programs}]\Microsoft Contoso\Microsoft ContosoApp Filler 2010.lnk</File>

        <Target>[{PackageRoot}]\Contoso\ContosoApp.EXE</Target>


      <Icon>[{Windows}]\Installer\{90140000-0011-0000-0000-0000000FF1CE}\inficon.exe</Icon>

        <Arguments />

        <WorkingDirectory />

        <AppUserModelId>ContosoApp.Filler.3</AppUserModelId>

        <Description>Fill out dynamic forms to gather and reuse information throughout the organization using Microsoft ContosoApp.</Description>

        <Hotkey>0</Hotkey>

        <ShowCommand>1</ShowCommand>

      <ApplicationId>[{PackageRoot}]\Contoso\ContosoApp.EXE</ApplicationId>

      </Shortcut>

  </Extension>

  <Extension Category="AppV.Shortcut">

    <Shortcut>

    <File>[{AppData}]\Microsoft\Contoso\Recent\Templates.LNK</File>

      <Target>[{AppData}]\Microsoft\Templates</Target>

      <Icon />

      <Arguments />

      <WorkingDirectory />

      <AppUserModelId />

      <Description />

      <Hotkey>0</Hotkey>

      <ShowCommand>1</ShowCommand>

      <!-- Note the ApplicationId is optional -->

    </Shortcut>

  </Extension>

 </Extensions>

</Shortcuts>
```

<span data-ttu-id="72695-162">Le sous-système d’extension associée aux types de **fichiers** associe des types de fichiers à des programmes pour qu’ils s’ouvrent par défaut ainsi que dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="72695-162">**File-Type Associates** extension subsystem associates file types with programs to open by default as well as set up the context menu.</span></span> 

>[!TIP]
><span data-ttu-id="72695-163">Vous pouvez configurer le sous-système avec des types MIME.</span><span class="sxs-lookup"><span data-stu-id="72695-163">You can set up the subsystem with MIME types.</span></span>

```XML

<FileTypeAssociations Enabled="true">

<Extensions>

  <Extension Category="AppV.FileTypeAssociation">

    <FileTypeAssociation>

      <FileExtension MimeAssociation="true">

      <Name>.docm</Name>

      <ProgId>contosowordpad.DocumentMacroEnabled.12</ProgId>

      <PerceivedType>document</PerceivedType>

    <ContentType>application/vnd.ms-contosowordpad.document.macroEnabled.12</ContentType>

      <OpenWithList>

        <ApplicationName>wincontosowordpad.exe</ApplicationName>

      </OpenWithList>

     <OpenWithProgIds>

        <ProgId>contosowordpad.8</ProgId>

      </OpenWithProgIds>

      <ShellNew>

        <Command />

        <DataBinary />

        <DataText />

        <FileName />

        <NullFile>true</NullFile>

        <ItemName />

        <IconPath />

        <MenuText />

        <Handler />

      </ShellNew>

    </FileExtension>

    <ProgId>

       <Name>contosowordpad.DocumentMacroEnabled.12</Name>

      <DefaultIcon\>[{Windows}]\Installer\{90140000-0011-0000-0000-000000FF1CE}\contosowordpadicon.exe,15</DefaultIcon>

        <Description>Blah Blah Blah</Description>

        <FriendlyTypeName>[{FOLDERID_ProgramFilesX86}]\Microsoft Contoso 14\res.dll,9182</FriendlyTypeName>

        <InfoTip>[{FOLDERID_ProgramFilesX86}]\Microsoft Contoso 14\res.dll,1424</InfoTip>

        <EditFlags>0</EditFlags>

        <ShellCommands>

          <DefaultCommand>Open</DefaultCommand>

          <ShellCommand>

           <ApplicationId>{e56fa627-c35f-4a01-9e79-7d36aed8225a}</ApplicationId>

             <Name>Edit</Name>

             <FriendlyName>&Edit</FriendlyName>

           <CommandLine>"[{PackageRoot}]\Contoso\WINcontosowordpad.EXE" /vu "%1"</CommandLine>

          </ShellCommand>

          </ShellCommand>

          <ApplicationId>{e56fa627-c35f-4a01-9e79-7d36aed8225a}</ApplicationId>

            <Name>Open</Name>

            <FriendlyName>&Open</FriendlyName>

            <CommandLine>"[{PackageRoot}]\Contoso\WINcontosowordpad.EXE" /n "%1"</CommandLine>

            <DropTargetClassId />

            <DdeExec>

              <Application>mscontosowordpad</Application>

              <Topic>ShellSystem</Topic>

              <IfExec>[SHELLNOOP]</IfExec>

              <DdeCommand>[SetForeground][ShellNewDatabase"%1"]</DdeCommand>

            </DdeExec>

          </ShellCommand>

        </ShellCommands>

      </ProgId>

     </FileTypeAssociation>

   </Extension>

  </Extensions>

  </FileTypeAssociations>
```

<span data-ttu-id="72695-164">Le sous-système d’extension des **protocoles d’URL** contrôle les protocoles d’URL intégrés au registre local de l’ordinateur client, par exemple, _mailto:_.</span><span class="sxs-lookup"><span data-stu-id="72695-164">**URL Protocols** extension subsystem controls the URL protocols integrated into the local registry of the client machine, for example, _mailto:_.</span></span> 

```XML

<URLProtocols Enabled="true">

<Extensions>

<Extension Category="AppV.URLProtocol">

<URLProtocol>

  <Name>mailto</Name>

  <ApplicationURLProtocol>

  <DefaultIcon>[{ProgramFilesX86}]\MicrosoftContoso\Contoso\contosomail.EXE,-9403</DefaultIcon>

  <EditFlags>2</EditFlags>

  <Description />

  <AppUserModelId />

  <FriendlyTypeName />

  <InfoTip />

<SourceFilter />

  <ShellFolder />

  <WebNavigableCLSID />

  <ExplorerFlags>2</ExplorerFlags>

  <CLSID />

  <ShellCommands>

  <DefaultCommand>open</DefaultCommand>

  <ShellCommand>

  <ApplicationId>[{ProgramFilesX86}]\Microsoft Contoso\Contoso\contosomail.EXE</ApplicationId>

  <Name>open</Name>

  <CommandLine>[{ProgramFilesX86}\Microsoft Contoso\Contoso\contosomail.EXE" -c OEP.Note /m "%1"</CommandLine>

  <DropTargetClassId />

  <FriendlyName />

  <Extended>0</Extended>

  <LegacyDisable>0</LegacyDisable>

  <SuppressionPolicy>2</SuppressionPolicy>

   <DdeExec>

  <NoActivateHandler />

  <Application>contosomail</Application>

  <Topic>ShellSystem</Topic>

  <IfExec>[SHELLNOOP]</IfExec>

  <DdeCommand>[SetForeground][ShellNewDatabase "%1"]</DdeCommand>

  </DdeExec>

  </ShellCommand>

  </ShellCommands>

  </ApplicationURLProtocol>

  </URLProtocol>

  </Extension>

  </Extension>

  </URLProtocols>
```

<span data-ttu-id="72695-165">Le sous-système d’extension des **clients logiciels** permet à l’application de s’inscrire en tant que client de messagerie, lecteur de News, lecteur multimédia et rend l’application visible dans l’interface utilisateur définir l’accès au programme et aux paramètres par défaut de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="72695-165">**Software Clients** extension subsystem allows the app to register as an email client, news reader, media player and makes the app visible in the Set program access and Computer defaults UI.</span></span> <span data-ttu-id="72695-166">Dans la plupart des cas, vous ne devez l’activer et la désactiver.</span><span class="sxs-lookup"><span data-stu-id="72695-166">In most cases, you should only need to enable and disable it.</span></span> <span data-ttu-id="72695-167">Il existe également un contrôle permettant d’activer et de désactiver le client de messagerie de manière spécifique si vous souhaitez que les autres clients restent activés, à l’exception de ce client.</span><span class="sxs-lookup"><span data-stu-id="72695-167">There is also a control to enable and disable the email client specifically if you want the other clients still enabled except for that client.</span></span>

```XML

<SoftwareClients Enabled="true">

  <ClientConfiguration EmailEnabled="false" />

</SoftwareClients>
```

<span data-ttu-id="72695-168">Le sous-système d’extension **AppPaths** ouvre les applications inscrites dans le chemin d’une application.</span><span class="sxs-lookup"><span data-stu-id="72695-168">**AppPaths** extension subsystem opens apps registered with an application path.</span></span> <span data-ttu-id="72695-169">Par exemple, si contoso.exe a un nom appPath de _MonApp_, les utilisateurs peuvent taper _MonApp_ dans le menu exécuter, en ouvrant contoso.exe.</span><span class="sxs-lookup"><span data-stu-id="72695-169">For example, if contoso.exe has an apppath name of _myapp_, users can type _myapp_ from the run menu, opening contoso.exe.</span></span>

```XML

<AppPaths Enabled="true">

<Extensions>

<Extension Category="AppV.AppPath">

<AppPath>

  <ApplicationId>[{ProgramFilesX86}]\Microsoft Contoso\Contoso\contosomail.EXE</ApplicationId>

  <Name>contosomail.exe</Name>

  <ApplicationPath>[{ProgramFilesX86}]\Microsoft Contoso\Contoso\contosomail.EXE</ApplicationPath>

  <PATHEnvironmentVariablePrefix />

  <CanAcceptUrl>false</CanAcceptUrl>

  <SaveUrl />

</AppPath>

</Extension>

</Extensions>

</AppPaths>
```

<span data-ttu-id="72695-170">Le sous-système d’extensions **com** permet à une application d’être inscrite aux serveurs com locaux.</span><span class="sxs-lookup"><span data-stu-id="72695-170">**COM** extensions subsystem allows an application registered to local COM servers.</span></span> <span data-ttu-id="72695-171">Le mode peut être:</span><span class="sxs-lookup"><span data-stu-id="72695-171">The mode can be:</span></span>

-   <span data-ttu-id="72695-172">Avec</span><span class="sxs-lookup"><span data-stu-id="72695-172">Integration</span></span>
-   <span data-ttu-id="72695-173">Identifié</span><span class="sxs-lookup"><span data-stu-id="72695-173">Isolated</span></span> 
-   <span data-ttu-id="72695-174">Désactivé</span><span class="sxs-lookup"><span data-stu-id="72695-174">Off</span></span>

```XML

<COM Mode="Isolated"/>
```

**<span data-ttu-id="72695-175">Objets de noyau virtuel</span><span class="sxs-lookup"><span data-stu-id="72695-175">Virtual Kernel Objects</span></span>**

```XML

<Objects Enabled="false" />
```

<span data-ttu-id="72695-176">Le **Registre virtuel** définit un registre dans le registre virtuel dans HKCU.</span><span class="sxs-lookup"><span data-stu-id="72695-176">**Virtual Registry** sets a registry in the virtual registry within HKCU.</span></span>

```XML

<Registry Enabled="true">

<Include>

<Key Path="\REGISTRY\USER\[{AppVCurrentUserSID}]\Software\ABC">

<Value Type="REG_SZ" Name="Bar" Data="NewValue" />

 </Key>

  <Key Path="\REGISTRY\USER\[{AppVCurrentUserSID}]\Software\EmptyKey" />

 </Include>

<Delete>

</Registry>
```

**<span data-ttu-id="72695-177">Système de fichiers virtuel</span><span class="sxs-lookup"><span data-stu-id="72695-177">Virtual File System</span></span>**

```XML

    <FileSystem Enabled="true" />
```

**<span data-ttu-id="72695-178">Polices virtuelles</span><span class="sxs-lookup"><span data-stu-id="72695-178">Virtual Fonts</span></span>**

```XML

      <Fonts Enabled="false" />
```

**<span data-ttu-id="72695-179">Variables d’environnement virtuel</span><span class="sxs-lookup"><span data-stu-id="72695-179">Virtual Environment Variables</span></span>**

```XML

<EnvironmentVariables Enabled="true">

<Include>

       <Variable Name="UserPath" Value="%path%;%UserProfile%" />

       <Variable Name="UserLib" Value="%UserProfile%\ABC" />

       </Include>

      <Delete>

       <Variable Name="lib" />

        </Delete>

        </EnvironmentVariables>
```

**<span data-ttu-id="72695-180">Services virtuels</span><span class="sxs-lookup"><span data-stu-id="72695-180">Virtual services</span></span>**

```XML

      <Services Enabled="false" />
```

#### <span data-ttu-id="72695-181">UserScripts</span><span class="sxs-lookup"><span data-stu-id="72695-181">UserScripts</span></span>

<span data-ttu-id="72695-182">Utilisez UserScripts pour configurer ou modifier l’environnement virtuel.</span><span class="sxs-lookup"><span data-stu-id="72695-182">Use UserScripts to set up or alter the virtual environment.</span></span>  <span data-ttu-id="72695-183">Vous pouvez également exécuter des scripts au moment du déploiement ou pour nettoyer l’environnement une fois l’application arrêtée.</span><span class="sxs-lookup"><span data-stu-id="72695-183">You can also execute scripts at the time of deployment or to clean up the environment after the application terminates.</span></span> <span data-ttu-id="72695-184">Pour voir un exemple de script, reportez-vous au fichier de configuration utilisateur généré par le Sequencer.</span><span class="sxs-lookup"><span data-stu-id="72695-184">To see a sample script, refer to the user configuration file generated by the sequencer.</span></span> <span data-ttu-id="72695-185">La section scripts ci-dessous fournit des informations supplémentaires sur les différents déclencheurs qui peuvent être utilisés.</span><span class="sxs-lookup"><span data-stu-id="72695-185">The Scripts section below provides more information on the various triggers that can be used.</span></span>

#### <span data-ttu-id="72695-186">ManagingAuthority</span><span class="sxs-lookup"><span data-stu-id="72695-186">ManagingAuthority</span></span>

<span data-ttu-id="72695-187">Utilisez ManagingAuthority lorsque deux versions de votre package sont co-exister sur le même ordinateur, l’une ayant été déployée vers App-V 4,6 et une autre déployée sur App-V 5,0.</span><span class="sxs-lookup"><span data-stu-id="72695-187">Use ManagingAuthority when two versions of your package co-exist on the same machine, one deployed to App-V 4.6 and another deployed on App-V 5.0.</span></span> <span data-ttu-id="72695-188">Pour permettre à App-V vNext de prendre en charge les points d’extension 4,6 App-V pour le package nommé, entrez ce qui suit dans le fichier UserConfig (où PackageName est le GUID du package dans App-V 4,6:</span><span class="sxs-lookup"><span data-stu-id="72695-188">To allow App-V vNext to take over App-V 4.6 extension points for the named package enter the following in the UserConfig file (where PackageName is the Package GUID in App-V 4.6:</span></span>

```XML

<ManagingAuthority TakeoverExtensionPointsFrom46="true" PackageName="032630c0-b8e2-417c-acef-76fc5297fe81" />
```

## <span data-ttu-id="72695-189">Fichier de configuration de déploiement (DeploymentConfig.xml)</span><span class="sxs-lookup"><span data-stu-id="72695-189">Deployment configuration file (DeploymentConfig.xml)</span></span>

<span data-ttu-id="72695-190">Le fichier DeploymentConfig fournit des paramètres de configuration pour le contexte de l’ordinateur et le contexte de l’utilisateur, en fournissant les mêmes fonctionnalités que celles indiquées dans le fichier UserConfig.</span><span class="sxs-lookup"><span data-stu-id="72695-190">The DeploymentConfig file provides configuration settings for machine context and user context, providing the same capabilities listed in the UserConfig file.</span></span> <span data-ttu-id="72695-191">Le paramètre est appliqué lors du déploiement du package sur un ordinateur exécutant le client App-V 5,1.</span><span class="sxs-lookup"><span data-stu-id="72695-191">The setting get applied when deploying the package to a computer running the App-V 5.1 client.</span></span>

<span data-ttu-id="72695-192">Utilisez le fichier DeploymentConfig pour spécifier ou modifier des paramètres personnalisés pour un package:</span><span class="sxs-lookup"><span data-stu-id="72695-192">Use the DeploymentConfig file to specify or modify custom settings for a package:</span></span>

- <span data-ttu-id="72695-193">Tous les paramètres de UserConfig</span><span class="sxs-lookup"><span data-stu-id="72695-193">All UserConfig settings</span></span>
- <span data-ttu-id="72695-194">Extensions qui ne peuvent être appliquées globalement que par tous les utilisateurs</span><span class="sxs-lookup"><span data-stu-id="72695-194">Extensions that can only be applied globally for all users</span></span>
- <span data-ttu-id="72695-195">Sous-systèmes virtuels pour emplacements d’ordinateur globaux (par exemple, registre)</span><span class="sxs-lookup"><span data-stu-id="72695-195">Virtual subsystems for global machine locations, for example, registry</span></span>
- <span data-ttu-id="72695-196">URL de la source de produit</span><span class="sxs-lookup"><span data-stu-id="72695-196">Product source URL</span></span>
- <span data-ttu-id="72695-197">Scripts (contexte de l’ordinateur uniquement)</span><span class="sxs-lookup"><span data-stu-id="72695-197">Scripts (machine context only)</span></span>
- <span data-ttu-id="72695-198">Contrôles pour arrêter les processus enfants</span><span class="sxs-lookup"><span data-stu-id="72695-198">Controls to terminate child processes</span></span>

### <span data-ttu-id="72695-199">En-tête</span><span class="sxs-lookup"><span data-stu-id="72695-199">Header</span></span>

<span data-ttu-id="72695-200">L’en-tête d’un fichier de configuration de déploiement dynamique ressemble à ceci:</span><span class="sxs-lookup"><span data-stu-id="72695-200">The header of a dynamic deployment configuration file looks like:</span></span>

```XML
<?xml version="1.0" encoding="utf-8"?><DeploymentConfiguration PackageId="1f8488bf-2257-46b4-b27f-09c9dbaae707" DisplayName="Reserved" xmlns="http://schemas.microsoft.com/appv/2010/deploymentconfiguration">
```

<span data-ttu-id="72695-201">**PackageId** est de la même valeur qu’existe dans le fichier manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-201">The **PackageId** is the same value as exists in the manifest file.</span></span>

### <span data-ttu-id="72695-202">Body</span><span class="sxs-lookup"><span data-stu-id="72695-202">Body</span></span>

<span data-ttu-id="72695-203">Le corps du fichier de configuration de déploiement dynamique comprend deux sections:</span><span class="sxs-lookup"><span data-stu-id="72695-203">The body of the dynamic deployment configuration file includes two sections:</span></span>

- <span data-ttu-id="72695-204">**UserConfiguration:** permet d’autoriser le même contenu que le fichier de configuration utilisateur décrit dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="72695-204">**UserConfiguration:** allows the same content as the user configuration file described in the previous section.</span></span>  <span data-ttu-id="72695-205">Lors de la publication du package pour un utilisateur, tous les paramètres de configuration nouvel appextensions de cette section remplacent les paramètres correspondants dans le manifeste au sein du package, sauf si vous fournissez un fichier de configuration utilisateur.</span><span class="sxs-lookup"><span data-stu-id="72695-205">When publishing the package to a user, any appextensions configuration settings in this section override corresponding settings in the manifest within the package, unless you provide a user configuration file.</span></span> <span data-ttu-id="72695-206">Si vous fournissez également un fichier UserConfig, il est utilisé à la place des paramètres utilisateur dans le fichier de configuration de déploiement.</span><span class="sxs-lookup"><span data-stu-id="72695-206">If also providing a UserConfig file, it gets used instead of the User settings in the deployment configuration file.</span></span> <span data-ttu-id="72695-207">Si vous publiez le package globalement, seul le contenu du fichier de configuration de déploiement s’utilisera en association avec le manifeste.</span><span class="sxs-lookup"><span data-stu-id="72695-207">If publishing the package globally, then only the contents of the deployment configuration file get used in combination with the manifest.</span></span> <span data-ttu-id="72695-208">Pour plus d’informations, consultez la section [contenu du fichier de configuration utilisateur (UserConfig.xml)](#user-configuration-file-contents-userconfigxml).</span><span class="sxs-lookup"><span data-stu-id="72695-208">For more details, see [User configuration file contents (UserConfig.xml)](#user-configuration-file-contents-userconfigxml).</span></span>

- <span data-ttu-id="72695-209">**MachineConfiguration:** contient des informations qui peuvent être configurées uniquement pour la totalité d’un ordinateur, et non pour un utilisateur spécifique de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="72695-209">**MachineConfiguration:** contains information that can be configured only for an entire machine, not for a specific user on the machine.</span></span> <span data-ttu-id="72695-210">Par exemple, HKEY_LOCAL_MACHINE clés de Registre dans le VFS.</span><span class="sxs-lookup"><span data-stu-id="72695-210">For example, HKEY_LOCAL_MACHINE registry keys in the VFS.</span></span>

```XML

<DeploymentConfiguration PackageId="1f8488bf-2257-46b4-b27f-09c9dbaae707" DisplayName="Reserved" xmlns="http://schemas.microsoft.com/appv/2010/deploymentconfiguration">

<UserConfiguration>

...

</UserConfiguration>

<MachineConfiguration>

...

</MachineConfiguration>

...

</MachineConfiguration>

</DeploymentConfiguration>
```

### <span data-ttu-id="72695-211">UserConfiguration</span><span class="sxs-lookup"><span data-stu-id="72695-211">UserConfiguration</span></span>

<span data-ttu-id="72695-212">Pour plus d’informations sur les paramètres fournis pour cette section, voir le [contenu du fichier de configuration utilisateur (UserConfig.xml)](#user-configuration-file-contents-userconfigxml) .</span><span class="sxs-lookup"><span data-stu-id="72695-212">Refer to [User configuration file contents (UserConfig.xml)](#user-configuration-file-contents-userconfigxml) for information on the settings provided for this section.</span></span> 

### <span data-ttu-id="72695-213">MachineConfiguration</span><span class="sxs-lookup"><span data-stu-id="72695-213">MachineConfiguration</span></span>

<span data-ttu-id="72695-214">Utilisez la section MachineConfiguration pour configurer des informations pour l’intégralité d’un ordinateur; pas pour un utilisateur spécifique de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="72695-214">Use the MachineConfiguration section to configure information for an entire machine; not for a specific user on the computer.</span></span> <span data-ttu-id="72695-215">Par exemple, HKEY_LOCAL_MACHINE clés de Registre du Registre virtuel.</span><span class="sxs-lookup"><span data-stu-id="72695-215">For example, HKEY_LOCAL_MACHINE registry keys in the virtual registry.</span></span> <span data-ttu-id="72695-216">Quatre sous-sections sont autorisées dans cet élément:</span><span class="sxs-lookup"><span data-stu-id="72695-216">There are four subsections allowed in under this element:</span></span>

1.  **[<span data-ttu-id="72695-217">Sous-systèmes</span><span class="sxs-lookup"><span data-stu-id="72695-217">Subsystems</span></span>](#subsystems-1)**
2.  **[<span data-ttu-id="72695-218">ProductSourceURLOptOut</span><span class="sxs-lookup"><span data-stu-id="72695-218">ProductSourceURLOptOut</span></span>](#productsourceurloptout)**
3.  **[<span data-ttu-id="72695-219">MachineScripts</span><span class="sxs-lookup"><span data-stu-id="72695-219">MachineScripts</span></span>](#machinescripts)**
4.  **[<span data-ttu-id="72695-220">TerminateChildProcess</span><span class="sxs-lookup"><span data-stu-id="72695-220">TerminateChildProcess</span></span>](#terminatechildprocess)**

#### <span data-ttu-id="72695-221">Sous-systèmes</span><span class="sxs-lookup"><span data-stu-id="72695-221">Subsystems</span></span>

<span data-ttu-id="72695-222">Nouvel appextensions et autres sous-systèmes organisés en tant que sous-nœuds.</span><span class="sxs-lookup"><span data-stu-id="72695-222">AppExtensions and other subsystems arranged as subnodes.</span></span>

```XML

<MachineConfiguration>

  <Subsystems>

  …

  </Subsystems>

…

</MachineConfiguration>
```

<span data-ttu-id="72695-223">Vous pouvez activer ou désactiver chaque sous-système à l’aide de l’attribut **Enabled** .</span><span class="sxs-lookup"><span data-stu-id="72695-223">You can enable or disable each subsystem using the **Enabled** attribute.</span></span>

**<span data-ttu-id="72695-224">Extensions</span><span class="sxs-lookup"><span data-stu-id="72695-224">Extensions</span></span>** 

<span data-ttu-id="72695-225">Quelques extensions de contrôle de sous-systèmes (sous-systèmes d’extension).</span><span class="sxs-lookup"><span data-stu-id="72695-225">Some subsystems (extension subsystems) control extensions.</span></span> <span data-ttu-id="72695-226">Le sous-système est une fonctionnalité d’application utilisée par les programmes par défaut.</span><span class="sxs-lookup"><span data-stu-id="72695-226">The subsystem is Application Capabilities that default programs use.</span></span> <span data-ttu-id="72695-227">Pour ce type d’extension, le package doit être publié globalement pour intégration dans le système local.</span><span class="sxs-lookup"><span data-stu-id="72695-227">For this type of extension, the package must be published globally for integration into the local system.</span></span> <span data-ttu-id="72695-228">Les mêmes règles relatives aux contrôles et aux paramètres qui s’appliquent aux extensions dans la configuration utilisateur s’appliquent également à celles de la section MachineConfiguration.</span><span class="sxs-lookup"><span data-stu-id="72695-228">The same rules for controls and settings that apply to the Extensions in the User Configuration also, apply to those in the MachineConfiguration section.</span></span>

<span data-ttu-id="72695-229">**Fonctionnalités d’application**: utilisé par les programmes par défaut qui permettent à une application de s’enregistrer comme suit:</span><span class="sxs-lookup"><span data-stu-id="72695-229">**Application Capabilities**: Used by default programs that allow an application to register itself as:</span></span>

- <span data-ttu-id="72695-230">Capable d’ouvrir des extensions de fichier spécifiques</span><span class="sxs-lookup"><span data-stu-id="72695-230">Capable of opening specific file extensions</span></span>
- <span data-ttu-id="72695-231">Une offre pour le menu Démarrer-emplacement du navigateur Internet</span><span class="sxs-lookup"><span data-stu-id="72695-231">A contender for the start menu internet browser slot</span></span>
- <span data-ttu-id="72695-232">Capable d’ouvrir des types MIME Windows spécifiques</span><span class="sxs-lookup"><span data-stu-id="72695-232">Capable of opening specific windows MIME types</span></span>

<span data-ttu-id="72695-233">Par ailleurs, cette extension rend l’application virtuelle visible dans l’interface utilisateur définir les programmes par défaut.</span><span class="sxs-lookup"><span data-stu-id="72695-233">This extension also makes the virtual application visible in the Set default programs UI.</span></span>

```XML

<ApplicationCapabilities Enabled="true">

  <Extensions>

   <Extension Category="AppV.ApplicationCapabilities">

    <ApplicationCapabilities>


   <ApplicationId>[{PackageRoot}]\LitView\LitViewBrowser.exe</ApplicationId>

     <Reference>

      <Name>LitView Browser</Name>

      <Path>SOFTWARE\LitView\Browser\Capabilities</Path>

     </Reference>

   <CapabilityGroup>

    <Capabilities>


   <Name>@[{ProgramFilesX86}]\LitView\LitViewBrowser.exe,-12345</Name>


   <Description>@[{ProgramFilesX86}]\LitView\LitViewBrowser.exe,-12346</Description>

     <Hidden>0</Hidden>

     <EMailSoftwareClient>Lit View E-Mail Client</EMailSoftwareClient>

     <FileAssociationList>

      <FileAssociation Extension=".htm" ProgID="LitViewHTML" />

      <FileAssociation Extension=".html" ProgID="LitViewHTML" />

      <FileAssociation Extension=".shtml" ProgID="LitViewHTML" />

     </FileAssociationList>

     <MIMEAssociationList>

      <MIMEAssociation Type="audio/mp3" ProgID="LitViewHTML" />

      <MIMEAssociation Type="audio/mpeg" ProgID="LitViewHTML" />

     </MIMEAssociationList>

    <URLAssociationList>

      <URLAssociation Scheme="http" ProgID="LitViewHTML.URL.http" />

     </URLAssociationList>

     </Capabilities>

  </CapabilityGroup>

   </ApplicationCapabilities>

  </Extension>

</Extensions>

</ApplicationCapabilities>
```

_**<span data-ttu-id="72695-234">Sous-systèmes d’extension pris en charge:</span><span class="sxs-lookup"><span data-stu-id="72695-234">Supported extension subsystems:</span></span>**_ 

<span data-ttu-id="72695-235">Le sous-système d’extension **du Registre virtuel** de l’ordinateur de l’entreprise définit une clé de Registre dans le registre virtuel dans HKEY_LOCAL_MACHINE.</span><span class="sxs-lookup"><span data-stu-id="72695-235">**Machine Wide Virtual Registry** extension subsystem sets a registry key in the virtual registry within HKEY_Local_Machine.</span></span>

```XML

<Registry>

<Include>

  <Key Path="\REGISTRY\\Machine\Software\ABC">

    <Value Type="REG_SZ" Name="Bar" Data="Baz" />

   </Key>

  <Key Path="\REGISTRY\Machine\Software\EmptyKey" />

 </Include>

<Delete>

</Registry>
```

**<span data-ttu-id="72695-236">Objets de noyau virtuel de l’ordinateur</span><span class="sxs-lookup"><span data-stu-id="72695-236">Machine Wide Virtual Kernel Objects</span></span>**

```XML

<Objects>

<NotIsolate>

   <Object Name="testObject" />

 </NotIsolate>

</Objects>
```

#### <span data-ttu-id="72695-237">ProductSourceURLOptOut</span><span class="sxs-lookup"><span data-stu-id="72695-237">ProductSourceURLOptOut</span></span>

<span data-ttu-id="72695-238">Utilisez ProductSourceURLOptOut pour indiquer que l’URL du package peut être modifiée globalement via _PackageSourceRoot_ (pour prendre en charge les scénarios de succursales).</span><span class="sxs-lookup"><span data-stu-id="72695-238">Use ProductSourceURLOptOut to indicate that the URL for the package can be modified globally through _PackageSourceRoot_ (to support branch office scenarios).</span></span> <span data-ttu-id="72695-239">Les modifications sont prises en compte lors du prochain lancement.</span><span class="sxs-lookup"><span data-stu-id="72695-239">Changes take effect on the next launch.</span></span> 

```XML

<MachineConfiguration>

  ... 

  <ProductSourceURLOptOut Enabled="true" />

  ...

</MachineConfiguration>
```

#### <span data-ttu-id="72695-240">MachineScripts</span><span class="sxs-lookup"><span data-stu-id="72695-240">MachineScripts</span></span>

<span data-ttu-id="72695-241">Le package peut être configuré pour exécuter des scripts au moment du déploiement, de la publication ou de la suppression.</span><span class="sxs-lookup"><span data-stu-id="72695-241">The package can be configured to execute scripts at time of deployment, publishing or removal.</span></span> <span data-ttu-id="72695-242">Pour voir un exemple de script, reportez-vous au fichier de configuration de déploiement généré par le Sequencer.</span><span class="sxs-lookup"><span data-stu-id="72695-242">To see a sample script, refer to the deployment configuration file generated by the sequencer.</span></span> 

<span data-ttu-id="72695-243">La section scripts ci-dessous fournit des informations supplémentaires sur les différents déclencheurs qui peuvent être utilisés.</span><span class="sxs-lookup"><span data-stu-id="72695-243">The Scripts section below provides more information on the various triggers that can be used.</span></span>

#### <span data-ttu-id="72695-244">TerminateChildProcess</span><span class="sxs-lookup"><span data-stu-id="72695-244">TerminateChildProcess</span></span>

<span data-ttu-id="72695-245">Le processus exécutable de l’application peut être spécifié, dont le processus enfant est arrêté au moment où le processus exe de l’application s’arrête.</span><span class="sxs-lookup"><span data-stu-id="72695-245">An application executable can be specified, whose child processes get terminated when the application exe process terminates.</span></span>

```XML

<MachineConfiguration>

  ...   

  <TerminateChildProcesses>

    <Application Path="[{PackageRoot}]\Contoso\ContosoApp.EXE" />

    <Application Path="[{PackageRoot}]\LitView\LitViewBrowser.exe" />

    <Application Path="[{ProgramFilesX86}]\Microsoft Contoso\Contoso\contosomail.EXE" />

  </TerminateChildProcesses>

  ...

</MachineConfiguration>
```



## <span data-ttu-id="72695-246">Scripts</span><span class="sxs-lookup"><span data-stu-id="72695-246">Scripts</span></span>

<span data-ttu-id="72695-247">Le tableau suivant décrit les différents événements de script et le contexte dans lequel ils peuvent être exécutés.</span><span class="sxs-lookup"><span data-stu-id="72695-247">The following table describes the various script events and the context under which they can be run.</span></span>

| <span data-ttu-id="72695-248">Temps d’exécution du script</span><span class="sxs-lookup"><span data-stu-id="72695-248">Script Execution Time</span></span>       | <span data-ttu-id="72695-249">Peuvent être spécifiées dans la configuration de déploiement</span><span class="sxs-lookup"><span data-stu-id="72695-249">Can be specified in Deployment Configuration</span></span> | <span data-ttu-id="72695-250">Peuvent être spécifiés dans la configuration de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="72695-250">Can be specified in User Configuration</span></span> | <span data-ttu-id="72695-251">Peut s’exécuter dans l’environnement virtuel du package</span><span class="sxs-lookup"><span data-stu-id="72695-251">Can run in the Virtual Environment of the package</span></span> | <span data-ttu-id="72695-252">Peut être exécuté dans le contexte d’une application spécifique.</span><span class="sxs-lookup"><span data-stu-id="72695-252">Can be run in the context of a specific application</span></span> | <span data-ttu-id="72695-253">S’exécute dans le contexte système/utilisateur (configuration du déploiement, configuration de l’utilisateur).</span><span class="sxs-lookup"><span data-stu-id="72695-253">Runs in system/user context: (Deployment Configuration, User Configuration)</span></span> |
|-----------------------------|----------------------------------------------|----------------------------------------|---------------------------------------------------|-----------------------------------------------------|-----------------------------------------------------------------------------|
| <span data-ttu-id="72695-254">AddPackage</span><span class="sxs-lookup"><span data-stu-id="72695-254">AddPackage</span></span>                  | <span data-ttu-id="72695-255">X</span><span class="sxs-lookup"><span data-stu-id="72695-255">X</span></span>                                            |                                        |                                                   |                                                     | <span data-ttu-id="72695-256">(SYSTÈME, NO/A)</span><span class="sxs-lookup"><span data-stu-id="72695-256">(SYSTEM, N/A)</span></span>                                                               |
| <span data-ttu-id="72695-257">PublishPackage</span><span class="sxs-lookup"><span data-stu-id="72695-257">PublishPackage</span></span>              | <span data-ttu-id="72695-258">X</span><span class="sxs-lookup"><span data-stu-id="72695-258">X</span></span>                                            | <span data-ttu-id="72695-259">X</span><span class="sxs-lookup"><span data-stu-id="72695-259">X</span></span>                                      |                                                   |                                                     | <span data-ttu-id="72695-260">(Système, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-260">(SYSTEM, User)</span></span>                                                              |
| <span data-ttu-id="72695-261">UnpublishPackage</span><span class="sxs-lookup"><span data-stu-id="72695-261">UnpublishPackage</span></span>            | <span data-ttu-id="72695-262">X</span><span class="sxs-lookup"><span data-stu-id="72695-262">X</span></span>                                            | <span data-ttu-id="72695-263">X</span><span class="sxs-lookup"><span data-stu-id="72695-263">X</span></span>                                      |                                                   |                                                     | <span data-ttu-id="72695-264">(Système, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-264">(SYSTEM, User)</span></span>                                                              |
| <span data-ttu-id="72695-265">RemovePackage</span><span class="sxs-lookup"><span data-stu-id="72695-265">RemovePackage</span></span>               | <span data-ttu-id="72695-266">X</span><span class="sxs-lookup"><span data-stu-id="72695-266">X</span></span>                                            |                                        |                                                   |                                                     | <span data-ttu-id="72695-267">(SYSTÈME, NO/A)</span><span class="sxs-lookup"><span data-stu-id="72695-267">(SYSTEM, N/A)</span></span>                                                               |
| <span data-ttu-id="72695-268">StartProcess</span><span class="sxs-lookup"><span data-stu-id="72695-268">StartProcess</span></span>                | <span data-ttu-id="72695-269">X</span><span class="sxs-lookup"><span data-stu-id="72695-269">X</span></span>                                            | <span data-ttu-id="72695-270">X</span><span class="sxs-lookup"><span data-stu-id="72695-270">X</span></span>                                      | <span data-ttu-id="72695-271">X</span><span class="sxs-lookup"><span data-stu-id="72695-271">X</span></span>                                                 | <span data-ttu-id="72695-272">X</span><span class="sxs-lookup"><span data-stu-id="72695-272">X</span></span>                                                   | <span data-ttu-id="72695-273">(Utilisateur, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-273">(User, User)</span></span>                                                                |
| <span data-ttu-id="72695-274">ExitProcess</span><span class="sxs-lookup"><span data-stu-id="72695-274">ExitProcess</span></span>                 | <span data-ttu-id="72695-275">X</span><span class="sxs-lookup"><span data-stu-id="72695-275">X</span></span>                                            | <span data-ttu-id="72695-276">X</span><span class="sxs-lookup"><span data-stu-id="72695-276">X</span></span>                                      |                                                   | <span data-ttu-id="72695-277">X</span><span class="sxs-lookup"><span data-stu-id="72695-277">X</span></span>                                                   | <span data-ttu-id="72695-278">(Utilisateur, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-278">(User, User)</span></span>                                                                |
| <span data-ttu-id="72695-279">StartVirtualEnvironment</span><span class="sxs-lookup"><span data-stu-id="72695-279">StartVirtualEnvironment</span></span>     | <span data-ttu-id="72695-280">X</span><span class="sxs-lookup"><span data-stu-id="72695-280">X</span></span>                                            | <span data-ttu-id="72695-281">X</span><span class="sxs-lookup"><span data-stu-id="72695-281">X</span></span>                                      | <span data-ttu-id="72695-282">X</span><span class="sxs-lookup"><span data-stu-id="72695-282">X</span></span>                                                 |                                                     | <span data-ttu-id="72695-283">(Utilisateur, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-283">(User, User)</span></span>                                                                |
| <span data-ttu-id="72695-284">TerminateVirtualEnvironment</span><span class="sxs-lookup"><span data-stu-id="72695-284">TerminateVirtualEnvironment</span></span> | <span data-ttu-id="72695-285">X</span><span class="sxs-lookup"><span data-stu-id="72695-285">X</span></span>                                            | <span data-ttu-id="72695-286">X</span><span class="sxs-lookup"><span data-stu-id="72695-286">X</span></span>                                      |                                                   |                                                     | <span data-ttu-id="72695-287">(Utilisateur, utilisateur)</span><span class="sxs-lookup"><span data-stu-id="72695-287">(User, User)</span></span>                                                                |

### <span data-ttu-id="72695-288">Utilisation de plusieurs scripts sur un seul déclencheur d’événements</span><span class="sxs-lookup"><span data-stu-id="72695-288">Using multiple scripts on a single event trigger</span></span>

<span data-ttu-id="72695-289">App-V 5,1 prend en charge l’utilisation de plusieurs scripts sur un seul déclencheur d’événements pour les packages App-V, y compris les packages que vous convertissez de App-V 4,6 vers App-V 5,0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="72695-289">App-V 5.1 supports the use of multiple scripts on a single event trigger for App-V packages, including packages that you convert from App-V 4.6 to App-V 5.0 or later.</span></span> <span data-ttu-id="72695-290">Pour activer l’utilisation de plusieurs scripts, App-V 5,1 utilise une application de lancement de script, nommée ScriptRunner.exe, installée dans le cadre de l’installation du client App-V.</span><span class="sxs-lookup"><span data-stu-id="72695-290">To enable the use of multiple scripts, App-V 5.1 uses a script launcher application, named ScriptRunner.exe, which is installed as part of the App-V client installation.</span></span>

### <span data-ttu-id="72695-291">Utiliser plusieurs scripts sur un seul déclencheur d’événements</span><span class="sxs-lookup"><span data-stu-id="72695-291">How to use multiple scripts on a single event trigger</span></span>

<span data-ttu-id="72695-292">Pour chaque script que vous souhaitez exécuter, transmettez ce script en tant qu’argument à l’application ScriptRunner.exe.</span><span class="sxs-lookup"><span data-stu-id="72695-292">For each script that you want to run, pass that script as an argument to the ScriptRunner.exe application.</span></span> <span data-ttu-id="72695-293">L’application exécute ensuite chaque script séparément, ainsi que les arguments que vous spécifiez pour chaque script.</span><span class="sxs-lookup"><span data-stu-id="72695-293">The application then runs each script separately, along with the arguments that you specify for each script.</span></span> <span data-ttu-id="72695-294">Utilisez un seul script (ScriptRunner.exe) par déclencheur.</span><span class="sxs-lookup"><span data-stu-id="72695-294">Use only one script (ScriptRunner.exe) per trigger.</span></span>

> [!NOTE]
> 
> <span data-ttu-id="72695-295">Nous vous conseillons d’exécuter la ligne à plusieurs scripts à partir d’une invite de commandes pour vous assurer que tous les arguments sont construits correctement avant de les ajouter au fichier de configuration du déploiement.</span><span class="sxs-lookup"><span data-stu-id="72695-295">We recommended that you run the multi-script line from a command prompt first to make sure that all arguments are built correctly before adding them to the deployment configuration file.</span></span>

### <span data-ttu-id="72695-296">Exemples de descriptions de scripts et de paramètres</span><span class="sxs-lookup"><span data-stu-id="72695-296">Example script and parameter descriptions</span></span>

<span data-ttu-id="72695-297">À l’aide de l’exemple de fichier et de tableau suivant, modifiez le fichier de déploiement ou de configuration utilisateur pour ajouter les scripts que vous souhaitez exécuter.</span><span class="sxs-lookup"><span data-stu-id="72695-297">Using the following example file and table, modify the deployment or user configuration file to add the scripts that you want to run.</span></span>

```XML
<MachineScripts>
 <AddPackage>
   <Path>ScriptRunner.exe</Path>
   <Arguments>
   -appvscript script1.exe arg1 arg2 –appvscriptrunnerparameters –wait –timeout=10
   -appvscript script2.vbs arg1 arg2
   -appvscript script3.bat arg1 arg2 –appvscriptrunnerparameters –wait –timeout=30 –rollbackonerror
   </Arguments>
   <Wait timeout=”40” RollbackOnError=”true”/>
 </AddPackage>
</MachineScripts>
```


**<span data-ttu-id="72695-298">Dans l’exemple de fichier, les paramètres sont les suivants:</span><span class="sxs-lookup"><span data-stu-id="72695-298">Parameters in the example file include:</span></span>**

#### \<AddPackage\>

<span data-ttu-id="72695-299">Nom du déclencheur d’événements pour lequel vous exécutez un script, par exemple en ajoutant un package ou en publiant un package.</span><span class="sxs-lookup"><span data-stu-id="72695-299">Name of the event trigger for which you are running a script, such as adding a package or publishing a package.</span></span>

#### \<Path\><span data-ttu-id="72695-300">ScriptRunner.exe</span><span class="sxs-lookup"><span data-stu-id="72695-300">ScriptRunner.exe</span></span>\</Path\>

<span data-ttu-id="72695-301">Application de lancement de script installée dans le cadre de l’installation du client App-V.</span><span class="sxs-lookup"><span data-stu-id="72695-301">The script launcher application that is installed as part of the App-V client installation.</span></span>

> [!NOTE]
> 
> <span data-ttu-id="72695-302">Même si ScriptRunner.exe est installé dans le cadre du client App-V, l’emplacement du client App-V doit être dans% path% ou ScriptRunner ne sera pas exécuté.</span><span class="sxs-lookup"><span data-stu-id="72695-302">Although ScriptRunner.exe is installed as part of the App-V client, the location of the App-V client must be in %path% or ScriptRunner will not run.</span></span> <span data-ttu-id="72695-303">ScriptRunner.exe se trouve généralement dans le Virtualizationfolder C:FilesApplication.</span><span class="sxs-lookup"><span data-stu-id="72695-303">ScriptRunner.exe is typically located in the C:FilesApplication Virtualizationfolder.</span></span>

#### \<Arguments\>

`-appvscript` <span data-ttu-id="72695-304">-Jeton qui représente le script réel que vous souhaitez exécuter.</span><span class="sxs-lookup"><span data-stu-id="72695-304">- Token that represents the actual script that you want to run.</span></span>

`script1.exe` <span data-ttu-id="72695-305">– Nom du script que vous souhaitez exécuter.</span><span class="sxs-lookup"><span data-stu-id="72695-305">– Name of the script that you want to run.</span></span>

`arg1 arg2` <span data-ttu-id="72695-306">-Arguments pour le script que vous souhaitez exécuter.</span><span class="sxs-lookup"><span data-stu-id="72695-306">– Arguments for the script that you want to run.</span></span>

`-appvscriptrunnerparameters` <span data-ttu-id="72695-307">-Jeton qui représente les options d’exécution pour script1.exe.</span><span class="sxs-lookup"><span data-stu-id="72695-307">– Token that represents the execution options for script1.exe.</span></span>

`-wait` <span data-ttu-id="72695-308">-Jeton qui informe l’exécution de script1.exe pour qu’il se termine avant de passer au script suivant.</span><span class="sxs-lookup"><span data-stu-id="72695-308">– Token that informs ScriptRunner to wait for execution of script1.exe to complete before proceeding to the next script.</span></span>

`-timeout=x` <span data-ttu-id="72695-309">-Jeton qui informe ScriptRunner de sorte qu’il cesse d’exécuter le script actuel après un nombre x de secondes.</span><span class="sxs-lookup"><span data-stu-id="72695-309">– Token that informs ScriptRunner to stop running the current script after x number of seconds.</span></span> <span data-ttu-id="72695-310">Tous les autres scripts spécifiés s’exécutent toujours.</span><span class="sxs-lookup"><span data-stu-id="72695-310">All other specified scripts still runs.</span></span>

`-rollbackonerror` <span data-ttu-id="72695-311">-Jeton qui informe ScriptRunner d’arrêter l’exécution de tous les scripts qui n’ont pas encore été exécutés et de restaurer une erreur sur le client App-V.</span><span class="sxs-lookup"><span data-stu-id="72695-311">– Token that informs ScriptRunner to stop running all scripts that haven't yet run and to roll back an error to the App-V client.</span></span>

#### \<Wait timeout=”40” RollbackOnError=”true”/\>

<span data-ttu-id="72695-312">Attend la fin globale d' ScriptRunner.exe.</span><span class="sxs-lookup"><span data-stu-id="72695-312">Waits for overall completion of ScriptRunner.exe.</span></span>

<span data-ttu-id="72695-313">Définissez la valeur du délai d’expiration du canal global de sorte qu’elle soit supérieure ou égale à la somme des valeurs de délai d’expiration des différents scripts.</span><span class="sxs-lookup"><span data-stu-id="72695-313">Set the timeout value for the overall runner to be greater than or equal to the sum of the timeout values on the individual scripts.</span></span>

<span data-ttu-id="72695-314">Si un script individuel a signalé une erreur et rollbackonerror a la valeur true, ScriptRunner signalerait l’erreur à un client App-V.</span><span class="sxs-lookup"><span data-stu-id="72695-314">If any individual script reported an error and rollbackonerror was set to true, then ScriptRunner would report the error to App-V client.</span></span>

<span data-ttu-id="72695-315">ScriptRunner exécute tout script dont le type de fichier est associé à une application installée sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="72695-315">ScriptRunner runs any script whose file type is associated with an application installed on the computer.</span></span> <span data-ttu-id="72695-316">Si l’application associée est manquante ou si le type de fichier du script n’est pas associé à une application sur l’ordinateur, le script ne s’exécute pas.</span><span class="sxs-lookup"><span data-stu-id="72695-316">If the associated application is missing, or the script’s file type is not associated with any application on the computer, the script does not run.</span></span>

### <span data-ttu-id="72695-317">Créer un fichier de configuration dynamique à l’aide d’un fichier manifeste App-V 5,1</span><span class="sxs-lookup"><span data-stu-id="72695-317">Create a dynamic configuration file using an App-V 5.1 manifest file</span></span>

<span data-ttu-id="72695-318">Vous pouvez créer le fichier de configuration dynamique en utilisant l’une des trois méthodes suivantes: manuellement, à l’aide de la console de gestion App-V 5,1 ou du séquençage d’un package, qui génère deux exemples de fichiers.</span><span class="sxs-lookup"><span data-stu-id="72695-318">You can create the dynamic configuration file using one of three methods: either manually, using the App-V 5.1 Management Console or sequencing a package, which generates two sample files.</span></span> <span data-ttu-id="72695-319">Pour plus d’informations sur la création du fichier à l’aide de la console de gestion de l’application-V 5,1, voir [créer un fichier de configuration personnalisé à l’aide de la console de gestion App-v 5,1](how-to-create-a-custom-configuration-file-by-using-the-app-v-51-management-console.md).</span><span class="sxs-lookup"><span data-stu-id="72695-319">For more information about how to create the file using the App-V 5.1 Management Console see, [How to create a custom configuration File by using the App-V 5.1 Management Console](how-to-create-a-custom-configuration-file-by-using-the-app-v-51-management-console.md).</span></span>

<span data-ttu-id="72695-320">Pour créer le fichier manuellement, les informations ci-dessus dans les sections précédentes peuvent être combinées dans un seul fichier.</span><span class="sxs-lookup"><span data-stu-id="72695-320">To create the file manually, the information above in previous sections can be combined into a single file.</span></span> <span data-ttu-id="72695-321">Nous vous recommandons d’utiliser des fichiers générés par le Sequencer.</span><span class="sxs-lookup"><span data-stu-id="72695-321">We recommend you use files generated by the sequencer.</span></span>



- <span data-ttu-id="72695-322">Ajoutez ou Votez en fonction [de suggestions.](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization)</span><span class="sxs-lookup"><span data-stu-id="72695-322">Add or vote on suggestions [here](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization).</span></span>
- <span data-ttu-id="72695-323">Pour les problèmes liés à l’application V, utilisez le [Forum TechNet App-v](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).</span><span class="sxs-lookup"><span data-stu-id="72695-323">For App-V issues, use the [App-V TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).</span></span>

## <span data-ttu-id="72695-324">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="72695-324">Related topics</span></span>

- [<span data-ttu-id="72695-325">Comment appliquer le fichier de configuration du déploiement à l'aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="72695-325">How to Apply the Deployment Configuration File by Using PowerShell</span></span>](how-to-apply-the-deployment-configuration-file-by-using-powershell51.md)

- [<span data-ttu-id="72695-326">Comment appliquer le fichier de configuration utilisateur à l'aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="72695-326">How to Apply the User Configuration File by Using PowerShell</span></span>](how-to-apply-the-user-configuration-file-by-using-powershell51.md)

- [<span data-ttu-id="72695-327">Opérations d'App-V5.1</span><span class="sxs-lookup"><span data-stu-id="72695-327">Operations for App-V 5.1</span></span>](operations-for-app-v-51.md)

---
